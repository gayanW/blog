<!DOCTYPE html>
<html>

<head>
    
        <title>CVE-2021-44228 Fixing Log4J2 Vulnerability in Spring Boot</title>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="A free colloborative space for Linux developers to share their tuts and tips on Linux and Open Source.
">

    

    <link rel="icon" href="/assets/img/blog.png">
    <link href="https://fonts.googleapis.com/css?family=Alegreya|Roboto|Roboto+Mono" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/damieng.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax/github.css">
</head>

<body>
	<div class="wrapper">
		<div class="header">
			<h1><a href="/">Linux Developer Space</a></h1>
			<ul>
				
				<li>
					<a href="/">Home</a>
				</li>
				
				<li>
					<a href="/about">About</a>
				</li>
				
			</ul>
		</div>

        <div class="post">

  <div class="post__title">
    <h1>CVE-2021-44228 Fixing Log4J2 Vulnerability in Spring Boot</h1>
  </div>
  <div class="post__date">
    <p>December 11, 2021</p>
  </div>
  <div class="post__meta">
    <p></p>
  </div>
  <div class="post__content">
    <p><strong>How to check my application is vulnerable?</strong></p>

<p>For your application to be vulnerable <code class="highlighter-rouge">log4j-core</code> has to be in your classpath.</p>

<p>The vulnerability is only present in <code class="highlighter-rouge">log4j-core</code> <code class="highlighter-rouge">2.14.1</code> and earlier versions.</p>

<p>For Maven projects:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./mvnw dependency:list | grep log4j
</code></pre></div></div>

<p>For Gradle:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./gradlew dependencies | grep log4j
</code></pre></div></div>

<p>Once you grep the console output, check whether log4j-core is present in your dependencies list. 
You can ignore <code class="highlighter-rouge">log4j-to-slf4j</code> and <code class="highlighter-rouge">log4j-api</code> dependencies in your grep output as these two were included by the <code class="highlighter-rouge">spring-boot-starter-logging</code> and cannot be exploited on their own. 
Only applications that include <code class="highlighter-rouge">log4j-core</code> and accept user input to format log messages are vulnerable.</p>

<p><strong>Fixes</strong></p>

<p>If your application is vulnerable consider one of the following fixes.</p>

<ul>
  <li>Upgrade log4j to 2.15.0 or newer</li>
  <li>Remove <code class="highlighter-rouge">org.apache.logging.log4j.core.lookupJndiLookup</code> class from the classpath</li>
  <li>Switch to SLF4J</li>
</ul>

  </div>

  







<!-- Make sure to POST params to match configs in staticman.yml 
     https://staticman.net/docs/index.html -->
<h3>Leave a comment</h3>
<form action="/fake" method="post" id="commentform" class="form-horizontal">
  <fieldset id="commentfields">
    <input name="options[redirect]" type="hidden" value="https://www.linuxdeveloper.space/log4j-vulnerability-fix/">
    <input name="options[slug]" type="hidden" value="log4j-vulnerability-fix">

    <textarea name="fields[message]" id="message" placeholder="Continue the discussion."></textarea>

    <label for="name">Name/alias <span>(Required, displayed)</span></label>
    <input type="text" name="fields[name]" id="name" placeholder="Name" />

    <label for="email">Email <span>(Required, not shown)</span></label>
    <input type="text" name="fields[email]" id="email" placeholder="you@domain.com" />

    <!-- https://ruddra.com/posts/implement-newsletters-using-staticman/ -->
    <!-- https://yasoob.me/posts/staticman_comment_notifications_mailgun/ -->
    <input type="checkbox" name="options[subscribe]" value="email">
    <label>Notify me of new comments</label>
    <br>

    <button onclick="setupForm()" type="button" id="commentbutton">Leave response</button>
  </fieldset>
</form>

<script>
    function setupForm() {
      var status = document.getElementById('commentstatus')
      status.innerText = ''

      var requiredIds = [ 'message', 'email', 'name']
      var missing = requiredIds.filter(id => document.getElementById(id).value.length < 3)
      if (missing.length > 0) {
        status.innerText = 'Some required fields are missing - (' + missing.join(', ') + ')'
        return
      }

      var button = document.getElementById('commentbutton')
      if (button.innerText != 'Confirm comment') {
        button.innerText = 'Confirm comment'
        return
      }

      var form = document.getElementById('commentform')
      form.action = 'https://dev.staticman.net/v3/entry/github/gayanw/blog/master/comments'
      button.innerText = 'Posting...'
      button.disabled = true
      form.submit()
      var fields = document.getElementById('commentfields')                                         
      fields.disabled = true
    }
  </script>
<div id="commentstatus" style="clear:both" class="status"></div>




</div>


	<div class="footer">
		<p>&copy; 2021 <a href="/">Gayan Weerakutti</a>, unless otherwise noted.</p>
	</div>
	</div>
</body>

</html>
